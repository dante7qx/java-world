<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!--
 This file was generated by Data Model Tool
 See <a href="http://www.hna.net/dmt/schema">http://www.hna.net/dmt/schema</a>

 Copyright (c) 2012 hnair.com
 All rights reserved.
 ForumGroup.xml
 Date: 2012-10-22
-->
<!DOCTYPE sqlMap PUBLIC "-//iBATIS.com//DTD SQL Map 2.0//EN" "sql-map-2.dtd">
<sqlMap namespace="ForumGroupBean">
    <typeAlias alias="forumGroupBean" type="com.epolleo.bp.forum.bean.ForumGroupBean" />
    <resultMap id="forumGroupResult" class="forumGroupBean">
        <result property="groupId" column="GROUP_ID" />
        <result property="groupName" column="GROUP_NAME" />
        <result property="groupDesc" column="GROUP_DESC" />
        <result property="createrId" column="CREATER_ID" />
        <result property="createrName" column="CREATER_NAME" />
        <result property="disableFlag" column="DISABLE_FLAG" />
        <result property="updateTime" column="UPDATE_TIME" />
        <result property="createTime" column="CREATE_TIME" />
    </resultMap>
    <!-- 分页查询 -->
    <select id="queryForumGroupPage" resultMap="forumGroupResult"
            parameterClass="map">
        SELECT
            GROUP_ID,
            GROUP_NAME,
            GROUP_DESC,
            CREATER_ID,
            CREATER_NAME,
            DISABLE_FLAG,
            UPDATE_TIME,
            CREATE_TIME
        FROM BP_FORUM_GROUP
        <dynamic prepend=" where ">
     		<isPropertyAvailable prepend=" and "
				removeFirstPrepend="true" property="groupId">
				GROUP_ID = #groupId#
			</isPropertyAvailable>
        </dynamic>
        
        <dynamic>
			<isNotEmpty prepend=" order by " property="sort">
				<isNotEmpty prepend=" " property="order">
					<isEqual property="order" compareValue="asc">
						asc
					</isEqual>
					<isEqual property="order" compareValue="desc">
						desc
					</isEqual>
				</isNotEmpty>
			</isNotEmpty>
		</dynamic>
    </select>
    <!-- 查询所有记录 -->
    <select id="queryForumGroupList" resultMap="forumGroupResult"
            parameterClass="map">
        SELECT
            GROUP_ID,
            GROUP_NAME,
            GROUP_DESC,
            CREATER_ID,
            CREATER_NAME,
            DISABLE_FLAG,
            UPDATE_TIME,
            CREATE_TIME
        FROM
            BP_FORUM_GROUP
    </select>
    <select id="queryForumGroupById" resultMap="forumGroupResult"
            parameterClass="Long">
        SELECT
            GROUP_ID,
            GROUP_NAME,
            GROUP_DESC,
            CREATER_ID,
            CREATER_NAME,
            DISABLE_FLAG,
            UPDATE_TIME,
            CREATE_TIME        FROM  BP_FORUM_GROUP
        WHERE
            GROUP_ID = #id#
    </select>
    <insert id="insertForumGroup" parameterClass="forumGroupBean">
        INSERT INTO BP_FORUM_GROUP (
            GROUP_ID,
            GROUP_NAME,
            GROUP_DESC,
            CREATER_ID,
            CREATER_NAME,
            DISABLE_FLAG,
            UPDATE_TIME,
            CREATE_TIME
        ) VALUES (
            #groupId# ,
            #groupName# ,
            #groupDesc# ,
            #createrId# ,
            #createrName# ,
            #disableFlag# ,
            #updateTime# ,
            #createTime# 
        )
    </insert>
    <!-- 修改论坛版块 -->
    <update id="updateForumGroup" parameterClass="forumGroupBean">
        UPDATE
            BP_FORUM_GROUP
        SET
            GROUP_NAME = #groupName# ,			
            GROUP_DESC = #groupDesc# 							
        WHERE
            GROUP_ID = #groupId#
    </update>
    <!-- 删除论坛版块 -->
    <delete id="deleteForumGroup" parameterClass="String">
        DELETE
        FROM
            BP_FORUM_GROUP
        WHERE
            GROUP_ID = #id#
    </delete>
    
</sqlMap>
